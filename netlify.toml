# ==============================================================================
# Green Health Netlify 设定档 (根目錄視角版)
# ==============================================================================
# 此版本假設 Netlify 的建置上下文 (context) 就是包含所有模組的專案根目錄。

# [build] 區塊定義了全局的建置設定。
[build]
  command = "echo '无需建置指令'"
  # 【核心修正】將發布目錄設定為 "." (當前目錄)。
  # 這告訴 Netlify：「你所在的那個地方，就是我要發布的所有內容。」
  publish = "."

# ==============================================================================
# [[redirects]] 區塊定義了重定向與重寫規則。
# 由於 publish = "."，所有 "to" 路徑都將相對於這個根目錄。
# ==============================================================================

# 規則 1: 處理倉庫後台 (/warehouse-panel/) 的請求
[[redirects]]
  from = "/warehouse-panel/*"
  to = "/warehouse-panel/:splat"
  status = 200

# 規則 2: 處理消費者前端 (GreenHealth-Auth-Module) 的請求
[[redirects]]
  from = "/*"
  to = "/GreenHealth-Auth-Module/:splat"
  status = 200

# ==============================================================================
# ⚙️ 本地开发环境设定
# ==============================================================================
[dev]
  framework = "#static"
  publish = "."
  
# ==============================================================================
# 🔑 环境变数设定
# ==============================================================================
[context.production.environment]
  SUPABASE_URL = "https://your-project.supabase.co"
  SUPABASE_ANON_KEY = "your-anon-key"