# ==============================================================================
# 檔案路徑: netlify.toml
# ------------------------------------------------------------------------------
# 【此為完整檔案，可直接覆蓋 - 最终修正版】
# ==============================================================================

[build]
  command = "echo '无需建置指令'"
  publish = "test-shiporder"
  # 【核心修正】新增这一行，告诉 Netlify 去哪里寻找 Functions 的原始码
  functions = "netlify/functions"
  
  [build.environment]
    NODE_VERSION = "18"

# ==============================================================================
# [[redirects]] 區块
# ==============================================================================

# 为共用模组建立规则
[[redirects]]
  from = "/_shared/*"
  to = "/_shared/:splat"
  status = 200

# 为 admin 模组建立规则
[[redirects]]
  from = "/admin/*"
  to = "/admin/:splat"
  status = 200

# 为 invoice-panel 模组建立规则
[[redirects]]
  from = "/invoice-panel/*"
  to = "/invoice-panel/:splat"
  status = 200

# 为 warehouse-panel 模组建立规则
[[redirects]]
  from = "/warehouse-panel/*"
  to = "/warehouse-panel/:splat"
  status = 200

# 为消费者前端建立「全收」规则
[[redirects]]
  from = "/*"
  to = "/GreenHealth-Auth-Module/:splat"
  status = 200

# [dev] 和 [context] 區块维持不变
[dev]
  framework = "#static"
  publish = "."
  
[context.production.environment]
  SUPABASE_URL = "https://your-project.supabase.co"
  SUPABASE_ANON_KEY = "your-anon-key"